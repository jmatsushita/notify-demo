{
  "v": "4.0",
  "name": "notify-demo",
  "workspace": {
    "commands": [],
    "projects": [
      {
        "name": "che-notify-demo",
        "source": {
          "location": "https://github.com/jmatsushita/notify-demo.git",
          "type": "git",
          "parameters": {
            "keepVcs": "false"
          }
        },
        "modules": [],
        "path": "/",
        "mixins": ["git"],
        "problems": []
      }
    ],
    "defaultEnv": "default",
    "name": "notify-demo",
    "attributes": {},
    "environments": {
      "default": {
        "machines": {
          "dev-pod/iris-relay": {
            "servers": {},
            "installers": [],
            "volumes": {},
            "env": {},
            "attributes": {
              "memoryLimitBytes": "2147483648"
            }
          },
          "dev-pod/iris": {
            "servers": {},
            "installers": [],
            "volumes": {},
            "env": {},
            "attributes": {
              "memoryLimitBytes": "2147483648"
            }
          },
          "dev-pod/saml-idp": {
            "servers": {},
            "installers": [],
            "volumes": {},
            "env": {},
            "attributes": {
              "memoryLimitBytes": "2147483648"
            }
          },
          "dev-pod/db": {
            "servers": {},
            "installers": [],
            "volumes": {},
            "env": {},
            "attributes": {
              "memoryLimitBytes": "2147483648"
            }
          }
        },
        "recipe": {
          "type": "openshift",
          "content": "kind: List\nitems:\n - \n  apiVersion: apps/v1\n  kind: Deployment\n  metadata:\n   name: notify-demo-deployment\n  spec:\n   replicas: 1\n   selector:\n    matchLabels:\n     my-workspace-pod: dev\n   template:\n    metadata:\n     name: dev-pod\n     labels:\n      my-workspace-pod: dev\n    spec:\n     containers:\n      - \n       image: 'jmatsushita/iris:latest'\n       name: iris\n       env:\n        - \n         name: IRIS_CFG_DB_HOST\n         value: db\n        - \n         name: IRIS_CFG_DB_PASSWORD\n         value: password\n        - \n         name: IRIS_CFG_DB_USER\n         value: iris\n       ports:\n        - \n         containerPort: 16649\n      - \n       image: 'jmatsushita/iris-relay:latest'\n       name: iris-relay\n       ports:\n        - \n         containerPort: 16648\n      - \n       image: 'kristophjunge/test-saml-idp:1.15'\n       name: saml-idp\n       env:\n        - \n         name: SIMPLESAMLPHP_ADMIN_PASSWORD\n         value: test\n        - \n         name: SIMPLESAMLPHP_SECRET_SALT\n         value: salt\n        - \n         name: SIMPLESAMLPHP_SP_ASSERTION_CONSUMER_SERVICE\n         value: 'http://localhost:16648/saml/sso/idp'\n        - \n         name: SIMPLESAMLPHP_SP_ENTITY_ID\n         value: iris\n        - \n         name: SIMPLESAMLPHP_SP_SINGLE_LOGOUT_SERVICE\n         value: 'http://localhost:16648/saml/sso/idp'\n       ports:\n        - \n         containerPort: 8080\n        - \n         containerPort: 8443\n       volumeMounts:\n        - \n         name: config-volume\n         mountPath: /var/www/simplesamlphp/config/authsources.php\n         subPath: authsources.php\n      - \n       image: 'mysql:5.7'\n       name: db\n       env:\n        - \n         name: MYSQL_DATABASE\n         value: iris\n        - \n         name: MYSQL_PASSWORD\n         value: password\n        - \n         name: MYSQL_ROOT_PASSWORD\n         value: test\n        - \n         name: MYSQL_USER\n         value: iris\n       ports:\n        - \n         containerPort: 3306\n       volumeMounts:\n        - \n         name: config-volume\n         mountPath: /docker-entrypoint-initdb.d/0_schema.sql\n         subPath: 0_schema.sql\n        - \n         name: config-volume\n         mountPath: /docker-entrypoint-initdb.d/1_schema.sql\n         subPath: 1_schema.sql\n        - \n         name: config-volume\n         mountPath: /docker-entrypoint-initdb.d/dummy_data.sql\n         subPath: dummy_data.sql\n     volumes:\n      - \n       name: config-volume\n       configMap:\n        name: notify-demo-config\n - \n  apiVersion: v1\n  kind: ConfigMap\n  metadata:\n   name: notify-demo-config\n  data:\n   my-key: my-value\n   authsources.php: |\n    <?php\n    $config = array(\n        'admin' => array(\n            'core:AdminPassword',\n        ),\n        'example-userpass' => array(\n            'exampleauth:UserPass',\n            'demo:demo' => array(\n                'uid' => array('1'),\n                'eduPersonAffiliation' => array('group1'),\n                'email' => 'demo1@foo.bar',\n                'login' => 'demo',\n            ),\n            'user2:user2pass' => array(\n                'uid' => array('2'),\n                'eduPersonAffiliation' => array('group2'),\n                'email' => 'user2@example.com',\n                'login' => 'user2',\n            ),\n        ),\n    );\n   dummy_data.sql: >\n    /*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS,\n    FOREIGN_KEY_CHECKS=0 */;\n\n    -- DEFAULT DB VALUES\n\n    LOCK TABLES `mode` WRITE;\n\n    INSERT INTO `mode` VALUES\n    (26,'call'),(35,'email'),(17,'slack'),(8,'sms'),(36,'drop');\n\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `priority` WRITE;\n\n    INSERT INTO `priority` VALUES\n    (8,'urgent',26),(17,'high',8),(26,'medium',35),(35,'low',35);\n\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `target_type` WRITE;\n\n    INSERT INTO `target_type` VALUES (3,'mailing-list'),(2,'team'),(1,'user');\n\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `target_role` WRITE;\n\n    INSERT INTO `target_role` VALUES\n        (8,'user',1),\n        (17,'manager',2),\n        (35,'team',2),\n        (44,'oncall-primary',2),\n        (45,'oncall-secondary',2);\n    UNLOCK TABLES;\n\n\n    -- END DEFAULT DB VALUES\n\n\n    LOCK TABLES `application` WRITE;\n\n    INSERT INTO `application` VALUES\n        (8,'Autoalerts','a7a9d7657ac8837cd7dfed0b93f4b8b864007724d7fa21422c24f4ff0adb2e49','{{#context}}\\n<div style=\\\"text-align: center;\\\">\\n    <a href=\\\"{{console_url}}\\\" style=\\\"margin-right: 10px;\\\">{{name}}</a>\\n    <div style=\\\"margin-bottom: 10px;\\\">\\n      <small>\\n        <span style=\\\"margin-right: 10px;\\\">\\n          <span class=\\\"light\\\">Datacenter:</span> {{fabric}}\\n        </span>\\n        <span>\\n          <span class=\\\"light\\\">Zones:</span> {{zones}}\\n        </span>\\n      </small>\\n    </div>\\n    {{#if nodes}}\\n      <p><small><span class=\\\"light\\\">Nodes:</span> {{#each nodes}} {{this}} {{/each}}</small></p>\\n    {{/if}}\\n    {{#if notes}}\\n      <p>Notes: {{notes}}</p>\\n    {{/if}}\\n  </div>\\n</div>\\n{{/context}}','{{#context}}\\n<ul>\\n  {{#if name}}\\n    <li data-toggle=\\\"tooltip\\\" data-placement=\\\"top\\\" title=\\\"{{name}}\\\">\\n      <strong> Name: </strong> {{name}}\\n    </li>\\n  {{/if}}\\n  {{#if filename}}\\n    <li data-toggle=\\\"tooltip\\\" data-placement=\\\"top\\\" title=\\\"{{filename}}\\\">\\n      <strong> Dashboard: </strong> {{filename}}\\n    </li>\\n  {{/if}}\\n  {{#if fabric}}\\n    <li data-toggle=\\\"tooltip\\\" data-placement=\\\"top\\\" title=\\\"{{fabric}}\\\">\\n      <strong>Fabric: </strong> {{fabric}}\\n    </li>\\n  {{/if}}\\n  {{#if zones}}\\n   <li data-toggle=\\\"tooltip\\\" data-placement=\\\"top\\\" title=\\\"{{zones}}\\\">\\n    <strong>Zones: </strong> {{zones}}\\n   </li>\\n  {{/if}}\\n  {{#if nodes}}\\n    <li>\\n      <strong>Nodes: </strong>\\n      <ul>\\n        {{#each nodes}}\\n          <li data-toggle=\\\"tooltip\\\" data-placement=\\\"top\\\" title=\\\"{{this}}\\\"> {{this}} </li>\\n        {{/each}}\\n      </ul>\\n    </li>\\n  {{/if}}\\n</ul>\\n{{/context}}\\n','{\\n  \\\"console_url\\\": \\\"\\\",\\n  \\\"fabric\\\": \\\"DC1\\\",\\n  \\\"filename\\\": \\\"dashboard\\\",\\n  \\\"graph_image_url\\\": \\\"http://url.example.com/foo\\\",\\n  \\\"metanodes\\\": [\\n    [\\\"execution_time.metanode1\\\", \\\"threshold: 72 is greater than the max (65)\\\"]\\n  ],\\n  \\\"name\\\": \\\"Name Of Your Alert\\\",\\n  \\\"nodes\\\": [\\n    [\\\"execution_time.server1.example.com\\\", \\\"threshold: 72 is greater than the max (65)\\\"]\\n  ],\\n  \\\"notes\\\": \\\"This is a note\\\",\\n  \\\"zones\\\": [\\\"zone1\\\", \\\"zone2\\\"]\\n}',NULL,0,0,0,NULL),\n        (10,'test-app','sdffdssdf',NULL,NULL,NULL,NULL,0,0,0,NULL),\n        (11,'iris','fooooo',NULL,NULL,NULL,NULL,1,1,1,NULL),\n        (12,'oncall','magic','','','{}',NULL,0,0,0,NULL);\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `application_mode` WRITE;\n\n    INSERT INTO `application_mode` VALUES\n        (8,8),\n        (8,17),\n        (8,26),\n        (8,35),\n        (10,8),\n        (10,17),\n        (10,26),\n        (10,35),\n        (11,8),\n        (11,17),\n        (11,26),\n        (11,35),\n        (12,8),\n        (12,17),\n        (12,26),\n        (12,35);\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `application_owner` WRITE;\n\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `application_quota` WRITE;\n\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `default_application_mode` WRITE;\n\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `dynamic_plan_map` WRITE;\n\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `generic_message_sent_status` WRITE;\n\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `incident` WRITE;\n\n    INSERT INTO `incident` VALUES\n        (1,40,'2017-01-25 23:22:55','2017-01-25 23:24:55','{\\\"console_url\\\": \\\"\\\", \\\"fabric\\\": \\\"DC1\\\", \\\"notes\\\": \\\"This is a note\\\", \\\"filename\\\": \\\"dashboard\\\", \\\"zones\\\": [\\\"zone1\\\", \\\"zone2\\\"], \\\"metanodes\\\": [[\\\"execution_time.metanode1\\\", \\\"threshold: 72 is greater than the max (65)\\\"]], \\\"nodes\\\": [[\\\"execution_time.server1.example.com\\\", \\\"threshold: 72 is greater than the max (65)\\\"]], \\\"graph_image_url\\\": \\\"http://url.example.com/foo\\\", \\\"name\\\":\\\"API Alert\\\"}',1,8,1,0),\n        (2,40,'2017-01-25 23:22:55','2017-01-25 23:24:55','{\\\"console_url\\\": \\\"\\\", \\\"fabric\\\": \\\"DC1\\\", \\\"notes\\\": \\\"This is a note\\\", \\\"filename\\\": \\\"dashboard\\\", \\\"zones\\\": [\\\"zone1\\\", \\\"zone2\\\"], \\\"metanodes\\\": [[\\\"execution_time.metanode1\\\", \\\"threshold: 72 is greater than the max (65)\\\"]], \\\"nodes\\\": [[\\\"execution_time.server1.example.com\\\", \\\"threshold: 72 is greater than the max (65)\\\"]], \\\"graph_image_url\\\": \\\"http://url.example.com/foo\\\", \\\"name\\\":\\\"API Alert\\\"}',1,8,1,0),\n        (3,40,'2017-01-25 23:22:55','2017-01-25 23:24:55','{\\\"console_url\\\": \\\"\\\", \\\"fabric\\\": \\\"DC1\\\", \\\"notes\\\": \\\"This is a note\\\", \\\"filename\\\": \\\"dashboard\\\", \\\"zones\\\": [\\\"zone1\\\", \\\"zone2\\\"], \\\"metanodes\\\": [[\\\"execution_time.metanode1\\\", \\\"threshold: 72 is greater than the max (65)\\\"]], \\\"nodes\\\": [[\\\"execution_time.server1.example.com\\\", \\\"threshold: 72 is greater than the max (65)\\\"]], \\\"graph_image_url\\\": \\\"http://url.example.com/foo\\\", \\\"name\\\":\\\"API Alert\\\"}',1,8,1,0);\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `incident_emails` WRITE;\n\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `mailing_list` WRITE;\n\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `mailing_list_membership` WRITE;\n\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `message` WRITE;\n\n    INSERT INTO `message` VALUES\n        (1,NULL,'2017-01-25 23:23:55','2017-01-25 23:24:55',8,1,'demo1@foo.bar',35,40,35,'email_subject','email_body',1,33,0,13),\n        (2,'10018616db1e4cceba3a9f69177c2343','2017-01-29 23:23:55','2017-01-25 23:24:55',8,1,'demo1@foo.bar',35,40,35,'email_subject','email_body',2,33,0,13),\n        (3,'10018616db1e4cceba3a9f69177c2343','2017-01-29 23:23:55','2017-01-25 23:24:55',8,1,'demo1@foo.bar',35,40,35,'email_subject','email_body',3,33,0,13);\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `message_changelog` WRITE;\n\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `plan` WRITE;\n\n    INSERT INTO `plan` VALUES\n        (1,'demo-test-foo','2017-01-25 23:23:55',1,NULL,'Test plan for e2e test',2,900,10,300,300,NULL,NULL,NULL),\n        (7,'demo-test-incident-post','2017-01-25 23:23:55',1,NULL,'Test plan for e2e test',1,900,10,300,300,NULL,NULL,NULL),\n        (8,'demo-test-incident-post','2017-01-25 23:23:56',1,NULL,'Test plan for e2e test',1,900,10,300,300,NULL,NULL,NULL),\n        (11,'demo-test-foo','2017-01-25 23:25:46',1,NULL,'Test plan for e2e test',2,900,10,300,300,NULL,NULL,NULL),\n        (17,'demo-test-incident-post','2017-01-25 23:25:46',1,NULL,'Test plan for e2e test',1,900,10,300,300,NULL,NULL,NULL),\n        (18,'demo-test-incident-post','2017-01-25 23:25:46',1,NULL,'Test plan for e2e test',1,900,10,300,300,NULL,NULL,NULL),\n        (21,'demo-test-foo','2017-01-25 23:26:44',1,NULL,'Test plan for e2e test',2,900,10,300,300,NULL,NULL,NULL),\n        (27,'demo-test-incident-post','2017-01-25 23:26:44',1,NULL,'Test plan for e2e test',1,900,10,300,300,NULL,NULL,NULL),\n        (28,'demo-test-incident-post','2017-01-25 23:26:45',1,NULL,'Test plan for e2e test',1,900,10,300,300,NULL,NULL,NULL),\n        (31,'demo-test-foo','2017-01-25 23:30:34',1,NULL,'Test plan for e2e test',2,900,10,300,300,NULL,NULL,NULL),\n        (37,'demo-test-incident-post','2017-01-25 23:30:34',1,NULL,'Test plan for e2e test',1,900,10,300,300,NULL,NULL,NULL),\n        (38,'demo-test-incident-post','2017-01-25 23:30:34',1,NULL,'Test plan for e2e test',1,900,10,300,300,NULL,NULL,NULL),\n        (39,'demo-test-other-app-incident-post','2017-01-25 23:30:34',1,NULL,'Test plan for e2e test',1,900,10,300,300,NULL,NULL,NULL),\n        (40,'demo-test-bar','2017-01-25 23:25:46',1,NULL,'Test plan for e2e email incident test',1,900,10,300,300,NULL,NULL,NULL),\n        (41,'Oncall test','2018-01-26 22:32:04',1,NULL,'Test plan for Oncall Iris integration',1,900,10,300,300,NULL,NULL,NULL);\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `plan_active` WRITE;\n\n    INSERT INTO `plan_active` VALUES\n        ('demo-test-foo',31),\n        ('demo-test-incident-post',38),\n        ('demo-test-other-app-incident-post',39),\n        ('demo-test-bar',40),\n        ('Oncall test',41);\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `plan_notification` WRITE;\n\n    INSERT INTO `plan_notification` VALUES\n        (1,1,1,'test_template',4,0,44,17,1,300,NULL),\n        (2,1,1,'test_template',4,0,35,35,0,600,NULL),\n        (3,1,2,'test_template',4,0,35,26,0,600,NULL),\n        (4,1,2,'test_template',4,0,44,8,1,300,NULL),\n        (5,7,1,'test_template',4,0,35,35,0,600,NULL),\n        (6,7,1,'test_template',4,0,44,17,1,300,NULL),\n        (7,8,1,'test_template',4,0,35,35,0,600,NULL),\n        (9,11,1,'test_template',4,0,44,17,1,300,NULL),\n        (10,11,1,'test_template',4,0,35,35,0,600,NULL),\n        (11,11,2,'test_template',4,0,35,26,0,600,NULL),\n        (12,11,2,'test_template',4,0,44,8,1,300,NULL),\n        (13,17,1,'test_template',4,0,35,35,0,600,NULL),\n        (14,17,1,'test_template',4,0,44,17,1,300,NULL),\n        (15,18,1,'test_template',4,0,35,35,0,600,NULL),\n        (17,21,1,'test_template',4,0,44,17,1,300,NULL),\n        (18,21,1,'test_template',4,0,35,35,0,600,NULL),\n        (19,21,2,'test_template',4,0,35,26,0,600,NULL),\n        (20,21,2,'test_template',4,0,44,8,1,300,NULL),\n        (21,27,1,'test_template',4,0,35,35,0,600,NULL),\n        (22,27,1,'test_template',4,0,44,17,1,300,NULL),\n        (23,28,1,'test_template',4,0,35,35,0,600,NULL),\n        (25,31,1,'test_template',4,0,44,17,1,300,NULL),\n        (26,31,1,'test_template',4,0,35,35,0,600,NULL),\n        (27,31,2,'test_template',4,0,35,26,0,600,NULL),\n        (28,31,2,'test_template',4,0,44,8,1,300,NULL),\n        (29,37,1,'test_template',4,0,35,35,0,600,NULL),\n        (30,37,1,'test_template',4,0,44,17,1,300,NULL),\n        (31,38,1,'test_template',4,0,35,35,0,600,NULL),\n        (32,39,1,'test_template_2',4,0,35,35,0,600,NULL),\n        (33,40,1,'test_template',4,0,35,35,0,600,NULL),\n        (34,41,1,'oncall-test',NULL,0,NULL,26,0,0,2),\n        (35,41,1,'oncall-test',NULL,0,NULL,26,0,0,1),\n        (36,41,1,'oncall-test',NULL,0,NULL,8,0,0,0);\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `response` WRITE;\n\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `target` WRITE;\n\n    INSERT INTO `target` VALUES\n        (1,'demo',1,1),\n        (2,'abc',1,1),\n        (3,'foo',1,1),\n        (4,'demo_team',2,1),\n        (5,'foo_team',2,1),\n        (6,'abc',3,1),\n        (7,'demo',3,1);\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `mailing_list_membership` WRITE;\n\n    INSERT INTO `mailing_list_membership` VALUES\n        (7,1);\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `target_application_mode` WRITE;\n\n    INSERT INTO `target_application_mode` VALUES\n        (1,8,26,26);\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `target_contact` WRITE;\n\n    INSERT INTO `target_contact` VALUES\n        (1,8,'+1 223-456-7890'),\n        (1,17,'demo1'),\n        (1,26,'+1 223-456-7890'),\n        (1,35,'demo1@foo.bar'),\n        (2,8,'+1 223-456-7891'),\n        (2,17,'demo2'),\n        (2,26,'+1 223-456-7891'),\n        (2,35,'demo2@foo.bar'),\n        (3,8,'+1 223-456-7892'),\n        (3,17,'demo3'),\n        (3,26,'+1 223-456-7892'),\n        (3,35,'demo3@foo.bar');\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `target_mode` WRITE;\n\n    INSERT INTO `target_mode` VALUES\n        (1,26,26);\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `target_reprioritization` WRITE;\n\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `team` WRITE;\n\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `template` WRITE;\n\n    INSERT INTO `template` VALUES\n        (12,'test_template','2017-01-25 15:26:45',1),\n        (13,'test_template','2017-01-25 15:30:35',1),\n        (14,'test_template_2','2017-01-25 15:30:35',1),\n        (15,'oncall-test','2018-01-26 14:31:19',1);\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `template_active` WRITE;\n\n    INSERT INTO `template_active` VALUES\n        ('test_template',13),\n        ('test_template_2',14),\n        ('oncall-test',15);\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `template_content` WRITE;\n\n    INSERT INTO `template_content` VALUES\n        (12,8,8,'','a',NULL,NULL,NULL,NULL,NULL,NULL),\n        (12,8,17,'','b',NULL,NULL,NULL,NULL,NULL,NULL),\n        (12,8,26,'','c',NULL,NULL,NULL,NULL,NULL,NULL),\n        (12,8,35,'email_subject','d',NULL,NULL,NULL,NULL,NULL,NULL),\n        (13,8,8,'','test_sms',NULL,NULL,NULL,NULL,NULL,NULL),\n        (13,8,17,'','test_slack',NULL,NULL,NULL,NULL,NULL,NULL),\n        (13,8,26,'','test_call',NULL,NULL,NULL,NULL,NULL,NULL),\n        (13,8,35,'email_subject','email_body',NULL,NULL,NULL,NULL,NULL,NULL),\n        (14,10,35,'email_subject','email_body',NULL,NULL,NULL,NULL,NULL,NULL),\n        (15,12,8,'','{{requester}} reports: {{description}}',NULL,NULL,NULL,NULL,NULL,NULL),\n        (15,12,17,'','{{requester}} reports: {{description}}',NULL,NULL,NULL,NULL,NULL,NULL),\n        (15,12,26,'','{{requester}} reports: {{description}}',NULL,NULL,NULL,NULL,NULL,NULL),\n        (15,12,35,'Oncall escalation','{{requester}} reports: {{description}}',NULL,NULL,NULL,NULL,NULL,NULL);\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `template_variable` WRITE;\n\n    INSERT INTO `template_variable` VALUES\n        (1,8,'fabric',0, 0),\n        (2,8,'console_url',0, 0),\n        (3,8,'filename',0, 0),\n        (4,8,'name',0, 0),\n        (5,8,'graph_image_url',0, 0),\n        (7,8,'zones',0, 0),\n        (8,8,'nodes',0, 0),\n        (9,8,'metanodes',0, 0),\n        (10,8,'notes',0, 0),\n        (11,12,'description',0, 0),\n        (12,12,'requester',0, 0);\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `twilio_delivery_status` WRITE;\n\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `twilio_retry` WRITE;\n\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `user` WRITE;\n\n    INSERT INTO `user` VALUES\n        (1,1),\n        (2,0),\n        (3,0);\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `user_setting` WRITE;\n\n    UNLOCK TABLES;\n\n\n    LOCK TABLES `user_team` WRITE;\n\n    UNLOCK TABLES;\n\n    /*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;\n   0_schema.sql: \"-- MySQL dump 10.13  Distrib 5.1.73, for redhat-linux-gnu (x86_64)\\n--\\n-- Host: localhost    Database: iris\\n-- ------------------------------------------------------\\n-- Server version\\t5.1.73\\n\\n/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;\\n/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;\\n/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;\\n/*!40101 SET NAMES utf8 */;\\n/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;\\n/*!40103 SET TIME_ZONE='+00:00' */;\\n/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;\\n/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;\\n/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;\\n/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;\\n\\n--\\n-- Table structure for table `application`\\n--\\n\\nCREATE SCHEMA IF NOT EXISTS `iris` DEFAULT CHARACTER SET utf8;\\nUSE `iris`;\\n\\nDROP TABLE IF EXISTS `application`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `application` (\\n  `id` int(11) NOT NULL AUTO_INCREMENT,\\n  `name` varchar(255) NOT NULL,\\n  `key` varchar(64) NOT NULL,\\n  `context_template` text,\\n  `summary_template` text,\\n  `sample_context` text,\\n  `mobile_template` text,\\n  `auth_only` tinyint(1) DEFAULT '0',\\n  `allow_other_app_incidents` tinyint(1) unsigned NOT NULL DEFAULT '0',\\n  `allow_authenticating_users` tinyint(1) unsigned NOT NULL DEFAULT '0',\\n  `secondary_key` varchar(64),\\n  PRIMARY KEY (`id`),\\n  UNIQUE KEY `name_idx` (`name`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `incident`\\n--\\n\\nDROP TABLE IF EXISTS `incident`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `incident` (\\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\\n  `plan_id` bigint(20) NOT NULL,\\n  `created` datetime NOT NULL,\\n  `updated` datetime DEFAULT NULL,\\n  `context` text,\\n  `owner_id` bigint(20) DEFAULT NULL,\\n  `application_id` int(11) NOT NULL,\\n  `current_step` int(11) NOT NULL,\\n  `active` tinyint(1) NOT NULL,\\n  PRIMARY KEY (`id`),\\n  KEY `ix_incident_plan_id` (`plan_id`),\\n  KEY `ix_incident_updated` (`updated`),\\n  KEY `ix_incident_owner_id` (`owner_id`),\\n  KEY `ix_incident_active` (`active`),\\n  KEY `ix_incident_application_id` (`application_id`),\\n  KEY `ix_incident_created` (`created`),\\n  CONSTRAINT `incident_ibfk_1` FOREIGN KEY (`plan_id`) REFERENCES `plan` (`id`),\\n  CONSTRAINT `incident_ibfk_2` FOREIGN KEY (`owner_id`) REFERENCES `user` (`target_id`),\\n  CONSTRAINT `incident_ibfk_3` FOREIGN KEY (`application_id`) REFERENCES `application` (`id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `message`\\n--\\n\\nDROP TABLE IF EXISTS `message`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `message` (\\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\\n  `batch` varchar(32) DEFAULT NULL,\\n  `created` datetime NOT NULL,\\n  `sent` datetime DEFAULT NULL,\\n  `application_id` int(11) NOT NULL,\\n  `target_id` bigint(20) NOT NULL,\\n  `destination` varchar(255) DEFAULT NULL,\\n  `mode_id` int(11) DEFAULT NULL,\\n  `plan_id` bigint(20) DEFAULT NULL,\\n  `priority_id` int(11) NOT NULL,\\n  `subject` varchar(255) DEFAULT NULL,\\n  `body` text,\\n  `incident_id` bigint(20) DEFAULT NULL,\\n  `plan_notification_id` bigint(20) DEFAULT NULL,\\n  `active` tinyint(1) NOT NULL DEFAULT '1',\\n  `template_id` int(11) DEFAULT NULL,\\n  PRIMARY KEY (`id`),\\n  KEY `plan_id` (`plan_id`),\\n  KEY `ix_message_sent` (`sent`),\\n  KEY `ix_message_created` (`created`),\\n  KEY `ix_message_incident_id` (`incident_id`),\\n  KEY `ix_message_plan_notification_id` (`plan_notification_id`),\\n  KEY `ix_message_priority_id` (`priority_id`),\\n  KEY `ix_message_batch` (`batch`),\\n  KEY `ix_message_application_id` (`application_id`),\\n  KEY `ix_message_target_id` (`target_id`),\\n  KEY `ix_message_mode_id` (`mode_id`),\\n  KEY `ix_message_active` (`active`),\\n  KEY `message_ibfk_8` (`template_id`),\\n  CONSTRAINT `message_ibfk_1` FOREIGN KEY (`application_id`) REFERENCES `application` (`id`),\\n  CONSTRAINT `message_ibfk_2` FOREIGN KEY (`target_id`) REFERENCES `target` (`id`),\\n  CONSTRAINT `message_ibfk_3` FOREIGN KEY (`mode_id`) REFERENCES `mode` (`id`),\\n  CONSTRAINT `message_ibfk_4` FOREIGN KEY (`plan_id`) REFERENCES `plan` (`id`),\\n  CONSTRAINT `message_ibfk_5` FOREIGN KEY (`priority_id`) REFERENCES `priority` (`id`),\\n  CONSTRAINT `message_ibfk_6` FOREIGN KEY (`incident_id`) REFERENCES `incident` (`id`),\\n  CONSTRAINT `message_ibfk_7` FOREIGN KEY (`plan_notification_id`) REFERENCES `plan_notification` (`id`),\\n  CONSTRAINT `message_ibfk_8` FOREIGN KEY (`template_id`) REFERENCES `template` (`id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\nDROP TABLE IF EXISTS `message_changelog`;\\nCREATE TABLE `message_changelog` (\\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\\n  `date` datetime NOT NULL,\\n  `message_id` bigint(20) NOT NULL,\\n  `change_type` varchar(255) NOT NULL,\\n  `old` varchar(255) NOT NULL,\\n  `new` varchar(255) NOT NULL,\\n  `description` varchar(255),\\n  PRIMARY KEY (`id`),\\n  KEY `ix_message_changelog_message_id` (`message_id`),\\n  KEY `ix_message_changelog_date` (`date`),\\n  CONSTRAINT `message_changelog_ibfk_1` FOREIGN KEY (`message_id`) REFERENCES `message` (`id`) ON DELETE CASCADE ON UPDATE CASCADE\\n) ENGINE=InnoDB;\\n\\n--\\n-- Table structure for table `mode`\\n--\\n\\nDROP TABLE IF EXISTS `mode`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `mode` (\\n  `id` int(11) NOT NULL AUTO_INCREMENT,\\n  `name` varchar(255) NOT NULL,\\n  PRIMARY KEY (`id`),\\n  UNIQUE KEY `name_idx` (`name`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `plan`\\n--\\n\\nDROP TABLE IF EXISTS `plan`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `plan` (\\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\\n  `name` varchar(255) NOT NULL,\\n  `created` datetime NOT NULL,\\n  `user_id` bigint(20) NOT NULL,\\n  `team_id` bigint(20) DEFAULT NULL,\\n  `description` text,\\n  `step_count` int(11) NOT NULL,\\n  `threshold_window` bigint(20) DEFAULT NULL,\\n  `threshold_count` bigint(20) DEFAULT NULL,\\n  `aggregation_window` bigint(20) DEFAULT NULL,\\n  `aggregation_reset` bigint(20) DEFAULT NULL,\\n  `tracking_key` varchar(255) DEFAULT NULL,\\n  `tracking_type` varchar(255) DEFAULT NULL,\\n  `tracking_template` text,\\n  PRIMARY KEY (`id`),\\n  KEY `user_id` (`user_id`),\\n  KEY `team_id` (`team_id`),\\n  KEY `ix_plan_created` (`created`),\\n  CONSTRAINT `plan_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`target_id`),\\n  CONSTRAINT `plan_ibfk_2` FOREIGN KEY (`team_id`) REFERENCES `team` (`target_id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `plan_active`\\n--\\n\\nDROP TABLE IF EXISTS `plan_active`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `plan_active` (\\n  `name` varchar(255) NOT NULL,\\n  `plan_id` bigint(20) NOT NULL,\\n  PRIMARY KEY (`name`),\\n  UNIQUE KEY `plan_id` (`plan_id`),\\n  CONSTRAINT `plan_active_ibfk_1` FOREIGN KEY (`plan_id`) REFERENCES `plan` (`id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `plan_notification`\\n--\\n\\nDROP TABLE IF EXISTS `plan_notification`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `plan_notification` (\\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\\n  `plan_id` bigint(20) NOT NULL,\\n  `step` int(11) NOT NULL,\\n  `template` varchar(255) DEFAULT NULL,\\n  `target_id` bigint(20),\\n  `optional` TINYINT(1) NOT NULL DEFAULT '0',\\n  `role_id` int(11),\\n  `priority_id` int(11) NOT NULL,\\n  `repeat` int(11) NOT NULL DEFAULT '0',\\n  `wait` int(11) NOT NULL DEFAULT '0',\\n  `dynamic_index` int(11),\\n  PRIMARY KEY (`id`),\\n  KEY `ix_plan_notification_plan_id` (`plan_id`),\\n  KEY `ix_plan_notification_template` (`template`),\\n  KEY `ix_plan_notification_role_id` (`role_id`),\\n  KEY `ix_plan_notification_priority_id` (`priority_id`),\\n  KEY `ix_plan_notification_target_id` (`target_id`),\\n  CONSTRAINT `plan_notification_ibfk_1` FOREIGN KEY (`plan_id`) REFERENCES `plan` (`id`),\\n  CONSTRAINT `plan_notification_ibfk_2` FOREIGN KEY(`template`) REFERENCES `template_active` (`name`) ON UPDATE CASCADE ON DELETE SET NULL,\\n  CONSTRAINT `plan_notification_ibfk_3` FOREIGN KEY (`target_id`) REFERENCES `target` (`id`),\\n  CONSTRAINT `plan_notification_ibfk_4` FOREIGN KEY (`role_id`) REFERENCES `target_role` (`id`),\\n  CONSTRAINT `plan_notification_ibfk_5` FOREIGN KEY (`priority_id`) REFERENCES `priority` (`id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `dynamic_plan_map`\\n--\\n\\nDROP TABLE IF EXISTS `dynamic_plan_map`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `dynamic_plan_map` (\\n  `incident_id` bigint(20) NOT NULL AUTO_INCREMENT,\\n  `dynamic_index` int(11) NOT NULL,\\n  `role_id` int(11) NOT NULL,\\n  `target_id` bigint(20) NOT NULL,\\n  PRIMARY KEY (`incident_id`, `dynamic_index`),\\n  KEY `ix_dynamic_plan_map_incident_id` (`incident_id`),\\n  CONSTRAINT `dynamic_plan_map_ibfk_1` FOREIGN KEY (`target_id`) REFERENCES `target` (`id`),\\n  CONSTRAINT `dynamic_plan_map_ibfk_2` FOREIGN KEY (`role_id`) REFERENCES `target_role` (`id`),\\n  CONSTRAINT `dynamic_plan_map_ibfk_3` FOREIGN KEY (`incident_id`) REFERENCES `incident` (`id`) ON DELETE CASCADE ON UPDATE CASCADE\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `priority`\\n--\\n\\nDROP TABLE IF EXISTS `priority`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `priority` (\\n  `id` int(11) NOT NULL AUTO_INCREMENT,\\n  `name` varchar(255) NOT NULL,\\n  `mode_id` int(11) NOT NULL,\\n  PRIMARY KEY (`id`),\\n  UNIQUE KEY `name_idx` (`name`),\\n  KEY `ix_priority_mode_id` (`mode_id`),\\n  CONSTRAINT `priority_ibfk_1` FOREIGN KEY (`mode_id`) REFERENCES `mode` (`id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `response`\\n--\\n\\nDROP TABLE IF EXISTS `response`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `response` (\\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\\n  `created` datetime NOT NULL,\\n  `message_id` bigint(20) NOT NULL,\\n  `content` text NOT NULL,\\n  `source` varchar(255) NOT NULL,\\n  PRIMARY KEY (`id`),\\n  KEY `ix_response_message_id` (`message_id`),\\n  KEY `ix_response_created` (`created`),\\n  CONSTRAINT `response_ibfk_1` FOREIGN KEY (`message_id`) REFERENCES `message` (`id`) ON DELETE CASCADE ON UPDATE CASCADE\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `target`\\n--\\n\\nDROP TABLE IF EXISTS `target`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `target` (\\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\\n  `name` varchar(255) NOT NULL,\\n  `type_id` int(11) NOT NULL,\\n  `active` tinyint(1) NOT NULL DEFAULT '1',\\n  PRIMARY KEY (`id`),\\n  UNIQUE KEY `name_type_idx` (`name`,`type_id`),\\n  KEY `active_index` (`active`),\\n  CONSTRAINT `target_ibfk_1` FOREIGN KEY (`type_id`) REFERENCES `target_type` (`id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `target_application_mode`\\n--\\n\\nDROP TABLE IF EXISTS `target_application_mode`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `target_application_mode` (\\n  `target_id` bigint(20) NOT NULL,\\n  `application_id` int(11) NOT NULL,\\n  `priority_id` int(11) NOT NULL,\\n  `mode_id` int(11) NOT NULL,\\n  PRIMARY KEY (`target_id`,`application_id`,`priority_id`),\\n  KEY `application_mode_ibfk_2` (`application_id`),\\n  KEY `application_mode_ibfk_3` (`priority_id`),\\n  KEY `application_mode_ibfk_4` (`mode_id`),\\n  CONSTRAINT `target_application_mode_ibfk_1` FOREIGN KEY (`target_id`) REFERENCES `target` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,\\n  CONSTRAINT `target_application_mode_ibfk_2` FOREIGN KEY (`application_id`) REFERENCES `application` (`id`),\\n  CONSTRAINT `target_application_mode_ibfk_3` FOREIGN KEY (`priority_id`) REFERENCES `priority` (`id`),\\n  CONSTRAINT `target_application_mode_ibfk_4` FOREIGN KEY (`mode_id`) REFERENCES `mode` (`id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `target_default_application_mode`\\n--\\n\\nDROP TABLE IF EXISTS `default_application_mode`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `default_application_mode` (\\n  `application_id` int(11) NOT NULL,\\n  `priority_id` int(11) NOT NULL,\\n  `mode_id` int(11) NOT NULL,\\n  PRIMARY KEY (`application_id`,`priority_id`),\\n  KEY `default_application_mode_ibfk_1` (`application_id`),\\n  KEY `default_application_mode_ibfk_2` (`priority_id`),\\n  KEY `default_application_mode_ibfk_3` (`mode_id`),\\n  CONSTRAINT `default_application_mode_ibfk_1` FOREIGN KEY (`application_id`) REFERENCES `application` (`id`),\\n  CONSTRAINT `default_application_mode_ibfk_2` FOREIGN KEY (`priority_id`) REFERENCES `priority` (`id`),\\n  CONSTRAINT `default_application_mode_ibfk_3` FOREIGN KEY (`mode_id`) REFERENCES `mode` (`id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n\\n--\\n-- Table structure for table `target_contact`\\n--\\n\\nDROP TABLE IF EXISTS `target_contact`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `target_contact` (\\n  `target_id` bigint(20) NOT NULL,\\n  `mode_id` int(11) NOT NULL,\\n  `destination` varchar(255) NOT NULL,\\n  PRIMARY KEY (`target_id`,`mode_id`),\\n  KEY `ix_target_contact_mode_id` (`mode_id`),\\n  CONSTRAINT `target_contact_ibfk_1` FOREIGN KEY (`target_id`) REFERENCES `target` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,\\n  CONSTRAINT `target_contact_ibfk_2` FOREIGN KEY (`mode_id`) REFERENCES `mode` (`id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `target_mode`\\n--\\n\\nDROP TABLE IF EXISTS `target_mode`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `target_mode` (\\n  `target_id` bigint(20) NOT NULL,\\n  `priority_id` int(11) NOT NULL,\\n  `mode_id` int(11) NOT NULL,\\n  PRIMARY KEY (`target_id`,`priority_id`),\\n  KEY `priority_id` (`priority_id`),\\n  KEY `ix_target_mode_mode_id` (`mode_id`),\\n  CONSTRAINT `target_mode_ibfk_1` FOREIGN KEY (`target_id`) REFERENCES `target` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,\\n  CONSTRAINT `target_mode_ibfk_2` FOREIGN KEY (`priority_id`) REFERENCES `priority` (`id`),\\n  CONSTRAINT `target_mode_ibfk_3` FOREIGN KEY (`mode_id`) REFERENCES `mode` (`id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `target_reprioritization`\\n--\\n\\nDROP TABLE IF EXISTS `target_reprioritization`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `target_reprioritization` (\\n  `target_id` bigint(20) NOT NULL,\\n  `src_mode_id` int(11) NOT NULL,\\n  `dst_mode_id` int(11) NOT NULL,\\n  `count` tinyint(5) unsigned NOT NULL,\\n  `duration` smallint(5) unsigned NOT NULL,\\n  PRIMARY KEY (`target_id`,`src_mode_id`),\\n  KEY `target_reprioritization_mode_src_mode_id_fk_idx` (`src_mode_id`),\\n  KEY `target_reprioritization_mode_dst_mode_id_fk_idx` (`dst_mode_id`),\\n  CONSTRAINT `target_reprioritization_mode_dst_mode_id_fk` FOREIGN KEY (`dst_mode_id`) REFERENCES `mode` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,\\n  CONSTRAINT `target_reprioritization_mode_src_mode_id_fk` FOREIGN KEY (`src_mode_id`) REFERENCES `mode` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,\\n  CONSTRAINT `target_reprioritization_target_id_fk` FOREIGN KEY (`target_id`) REFERENCES `target` (`id`) ON DELETE CASCADE ON UPDATE CASCADE\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `target_role`\\n--\\n-- Used in plan step, one multiple role can map to same target type\\n--\\n\\nDROP TABLE IF EXISTS `target_role`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `target_role` (\\n  `id` int(11) NOT NULL AUTO_INCREMENT,\\n  `name` varchar(255) NOT NULL,\\n  `type_id` int(11) NOT NULL,\\n  PRIMARY KEY (`id`),\\n  UNIQUE KEY `name_idx` (`name`),\\n  KEY `ix_target_role_type_id` (`type_id`),\\n  CONSTRAINT `target_role_ibfk_1` FOREIGN KEY (`type_id`) REFERENCES `target_type` (`id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `target_type`\\n--\\n\\nDROP TABLE IF EXISTS `target_type`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `target_type` (\\n  `id` int(11) NOT NULL AUTO_INCREMENT,\\n  `name` varchar(255) NOT NULL,\\n  PRIMARY KEY (`id`),\\n  UNIQUE KEY `name` (`name`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `team`\\n--\\n\\nDROP TABLE IF EXISTS `team`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `team` (\\n  `target_id` bigint(20) NOT NULL,\\n  `manager_id` bigint(20) DEFAULT NULL,\\n  `director_id` bigint(20) DEFAULT NULL,\\n  PRIMARY KEY (`target_id`),\\n  UNIQUE KEY `target_id` (`target_id`),\\n  KEY `manager_id` (`manager_id`),\\n  KEY `director_id` (`director_id`),\\n  CONSTRAINT `team_ibfk_1` FOREIGN KEY (`target_id`) REFERENCES `target` (`id`),\\n  CONSTRAINT `team_ibfk_2` FOREIGN KEY (`manager_id`) REFERENCES `user` (`target_id`),\\n  CONSTRAINT `team_ibfk_3` FOREIGN KEY (`director_id`) REFERENCES `user` (`target_id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `template`\\n--\\n\\nDROP TABLE IF EXISTS `template`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `template` (\\n  `id` int(11) NOT NULL AUTO_INCREMENT,\\n  `name` varchar(255) NOT NULL,\\n  `created` datetime NOT NULL,\\n  `user_id` bigint(20) NOT NULL,\\n  PRIMARY KEY (`id`),\\n  KEY `ix_template_name` (`name`),\\n  KEY `ix_template_user_id` (`user_id`),\\n  KEY `ix_template_created` (`created`),\\n  CONSTRAINT `template_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`target_id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `template_active`\\n--\\n\\nDROP TABLE IF EXISTS `template_active`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `template_active` (\\n  `name` varchar(255) NOT NULL,\\n  `template_id` int(11) NOT NULL,\\n  PRIMARY KEY (`name`),\\n  UNIQUE KEY `template_id` (`template_id`),\\n  CONSTRAINT `template_active_ibfk_1` FOREIGN KEY (`template_id`) REFERENCES `template` (`id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `template_content`\\n--\\n\\nDROP TABLE IF EXISTS `template_content`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `template_content` (\\n  `template_id` int(11) NOT NULL,\\n  `application_id` int(11) NOT NULL,\\n  `mode_id` int(11) NOT NULL,\\n  `subject` varchar(255) NOT NULL,\\n  `body` text NOT NULL,\\n  `call` text,\\n  `sms` text,\\n  `im` text,\\n  `email_subject` varchar(255) DEFAULT NULL,\\n  `email_text` text,\\n  `email_html` text,\\n  PRIMARY KEY (`template_id`,`application_id`,`mode_id`),\\n  KEY `ix_template_content_template_id` (`template_id`),\\n  KEY `ix_template_content_application_id` (`application_id`),\\n  KEY `ix_template_content_mode_id` (`mode_id`),\\n  CONSTRAINT `template_content_ibfk_1` FOREIGN KEY (`template_id`) REFERENCES `template` (`id`),\\n  CONSTRAINT `template_content_ibfk_2` FOREIGN KEY (`application_id`) REFERENCES `application` (`id`),\\n  CONSTRAINT `template_content_ibfk_3` FOREIGN KEY (`mode_id`) REFERENCES `mode` (`id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `template_variable`\\n--\\n\\nDROP TABLE IF EXISTS `template_variable`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `template_variable` (\\n  `id` int(11) NOT NULL AUTO_INCREMENT,\\n  `application_id` int(11) NOT NULL,\\n  `name` varchar(255) NOT NULL,\\n  `required` tinyint(1) NOT NULL DEFAULT '0',\\n  `title_variable` tinyint(1) NOT NULL DEFAULT '0',\\n  PRIMARY KEY (`id`),\\n  KEY `ix_template_variable_application_id` (`application_id`),\\n  CONSTRAINT `template_variable_ibfk_1` FOREIGN KEY (`application_id`) REFERENCES `application` (`id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `user`\\n--\\n\\nDROP TABLE IF EXISTS `user`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `user` (\\n  `target_id` bigint(20) NOT NULL,\\n  `admin` tinyint(1) unsigned NOT NULL DEFAULT '0',\\n  PRIMARY KEY (`target_id`),\\n  CONSTRAINT `user_ibfk_1` FOREIGN KEY (`target_id`) REFERENCES `target` (`id`) ON DELETE CASCADE ON UPDATE CASCADE\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `user_setting`\\n--\\n\\nDROP TABLE IF EXISTS `user_setting`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `user_setting` (\\n  `user_id` bigint(20) NOT NULL,\\n  `name` varchar(255) NOT NULL,\\n  `value` varchar(255) NOT NULL,\\n  PRIMARY KEY (`user_id`, `name`),\\n  CONSTRAINT `user_setting_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `target` (`id`) ON DELETE CASCADE ON UPDATE CASCADE\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `user_team`\\n--\\n\\nDROP TABLE IF EXISTS `user_team`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `user_team` (\\n  `user_id` bigint(20) NOT NULL,\\n  `team_id` bigint(20) NOT NULL,\\n  PRIMARY KEY (`user_id`,`team_id`),\\n  KEY `ix_user_team_team_id` (`team_id`),\\n  CONSTRAINT `user_team_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`target_id`),\\n  CONSTRAINT `user_team_ibfk_2` FOREIGN KEY (`team_id`) REFERENCES `team` (`target_id`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n\\n\\n--\\n-- Table structure for table `application_quotas`\\n--\\n\\nDROP TABLE IF EXISTS `application_quota`;\\nCREATE TABLE `application_quota` (\\n  `application_id` int(11) NOT NULL,\\n  `hard_quota_threshold` smallint(5) NOT NULL,\\n  `soft_quota_threshold` smallint(5) NOT NULL,\\n  `hard_quota_duration` smallint(5) NOT NULL,\\n  `soft_quota_duration` smallint(5) NOT NULL,\\n  `plan_name` varchar(255),\\n  `target_id` bigint(20),\\n  `wait_time` smallint(5) NOT NULL DEFAULT 0,\\n  PRIMARY KEY (`application_id`),\\n  KEY `application_quota_plan_name_fk_idx` (`plan_name`),\\n  KEY `application_quota_target_id_fk_idx` (`target_id`),\\n  CONSTRAINT `application_id_ibfk` FOREIGN KEY (`application_id`) REFERENCES `application` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,\\n  CONSTRAINT `plan_name_ibfk` FOREIGN KEY (`plan_name`) REFERENCES `plan_active` (`name`) ON DELETE SET NULL ON UPDATE CASCADE,\\n  CONSTRAINT `target_id_ibfk` FOREIGN KEY (`target_id`) REFERENCES `target` (`id`) ON DELETE SET NULL ON UPDATE SET NULL\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n\\n\\n--\\n-- Table structure for table `application_mode`\\n--\\n\\nDROP TABLE IF EXISTS `application_mode`;\\nCREATE TABLE `application_mode` (\\n  `application_id` int(11) NOT NULL,\\n  `mode_id` int(11) NOT NULL,\\n  PRIMARY KEY (`application_id`, `mode_id`),\\n  CONSTRAINT `application_mode_application_id_ibfk` FOREIGN KEY (`application_id`) REFERENCES `application` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,\\n  CONSTRAINT `application_mode_mode_id_ibfk` FOREIGN KEY (`mode_id`) REFERENCES `mode` (`id`) ON DELETE CASCADE ON UPDATE CASCADE\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n\\n--\\n-- Table structure for table `application_owner`\\n--\\n\\nDROP TABLE IF EXISTS `application_owner`;\\nCREATE TABLE `application_owner` (\\n  `application_id` int(11) NOT NULL,\\n  `user_id` bigint(20) NOT NULL,\\n  PRIMARY KEY (`application_id`, `user_id`),\\n  CONSTRAINT `application_owner_application_id_ibfk` FOREIGN KEY (`application_id`) REFERENCES `application` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,\\n  CONSTRAINT `application_owner_user_id_ibfk` FOREIGN KEY (`user_id`) REFERENCES `user` (`target_id`) ON DELETE CASCADE ON UPDATE CASCADE\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n\\n--\\n-- Table structure for table `twilio_delivery_status`\\n--\\n\\nDROP TABLE IF EXISTS `twilio_delivery_status`;\\nCREATE TABLE `twilio_delivery_status` (\\n  `twilio_sid` varchar(34) NOT NULL,\\n  `message_id` bigint(20) DEFAULT NULL,\\n  `status` varchar(30) DEFAULT NULL,\\n  PRIMARY KEY (`twilio_sid`),\\n  KEY `twilio_delivery_status_message_id_fk_idx` (`message_id`),\\n  CONSTRAINT `twilio_delivery_status_message_id_ibfk` FOREIGN KEY (`message_id`) REFERENCES `message` (`id`) ON DELETE CASCADE ON UPDATE CASCADE\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n\\n\\nDROP TABLE IF EXISTS `twilio_retry`;\\nCREATE TABLE `twilio_retry` (\\n  `message_id` bigint(20) NOT NULL,\\n  `retry_id` bigint(20) NOT NULL,\\n  PRIMARY KEY (`message_id`),\\n  KEY `twilio_retry_retry_id_fk_idx` (`retry_id`),\\n  CONSTRAINT `twilio_retry_message_id_ibfk` FOREIGN KEY (`message_id`) REFERENCES `message` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,\\n  CONSTRAINT `twilio_retry_retry_id_ibfk` FOREIGN KEY (`message_id`) REFERENCES `message` (`id`) ON DELETE CASCADE ON UPDATE CASCADE\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n\\n--\\n-- Table structure for table `incident_emails`\\n--\\n\\nDROP TABLE IF EXISTS `incident_emails`;\\nCREATE TABLE `incident_emails` (\\n  `email` varchar(255) NOT NULL,\\n  `application_id` int(11) NOT NULL,\\n  `plan_name` varchar(255) NOT NULL,\\n  PRIMARY KEY (`email`),\\n  KEY `incident_emails_plan_name_fk_idx` (`plan_name`),\\n  KEY `incident_emails_application_id_fk_idx` (`application_id`),\\n  CONSTRAINT `incident_emails_application_id_ibfk` FOREIGN KEY (`application_id`) REFERENCES `application` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,\\n  CONSTRAINT `incident_emails_plan_name_ibfk` FOREIGN KEY (`plan_name`) REFERENCES `plan_active` (`name`) ON DELETE CASCADE ON UPDATE CASCADE\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n\\n--\\n-- Table structure for table `generic_message_sent_status`\\n--\\n\\nDROP TABLE IF EXISTS `generic_message_sent_status`;\\nCREATE TABLE `generic_message_sent_status` (\\n  `message_id` bigint(20) NOT NULL,\\n  `status` tinyint(1) NOT NULL,\\n  PRIMARY KEY (`message_id`),\\n  CONSTRAINT `generic_message_sent_status_message_id_ibfk` FOREIGN KEY (`message_id`) REFERENCES `message` (`id`) ON DELETE CASCADE ON UPDATE CASCADE\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n\\n--\\n-- Table structure for table `mailing_list`\\n--\\n\\nDROP TABLE IF EXISTS `mailing_list`;\\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\\n/*!40101 SET character_set_client = utf8 */;\\nCREATE TABLE `mailing_list` (\\n  `target_id` bigint(20) NOT NULL,\\n  `count` bigint(20) NOT NULL DEFAULT 0,\\n  PRIMARY KEY (`target_id`),\\n  CONSTRAINT `mailing_list_ibfk_1` FOREIGN KEY (`target_id`) REFERENCES `target` (`id`) ON DELETE CASCADE ON UPDATE CASCADE\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n\\n--\\n-- Table structure for table `mailing_list_membership`\\n--\\n\\nDROP TABLE IF EXISTS `mailing_list_membership`;\\nCREATE TABLE `mailing_list_membership` (\\n  `list_id` bigint(20) NOT NULL,\\n  `user_id` bigint(20) NOT NULL,\\n  PRIMARY KEY (`list_id`, `user_id`),\\n  CONSTRAINT `mailing_list_membership_list_id_ibfk` FOREIGN KEY (`list_id`) REFERENCES `mailing_list` (`target_id`) ON DELETE CASCADE ON UPDATE CASCADE,\\n  CONSTRAINT `mailing_list_membership_user_id_ibfk` FOREIGN KEY (`user_id`) REFERENCES `user` (`target_id`) ON DELETE CASCADE ON UPDATE CASCADE\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n\\n\\nDROP TABLE IF EXISTS `device`;\\nCREATE TABLE `device` (\\n  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,\\n  `registration_id` VARCHAR(255) NOT NULL UNIQUE,\\n  `user_id` BIGINT(20) NOT NULL,\\n  `platform` VARCHAR(255) NOT NULL,\\n  PRIMARY KEY (`id`),\\n  CONSTRAINT `device_user_id_ibfk` FOREIGN KEY (`user_id`) REFERENCES `user` (`target_id`) ON DELETE CASCADE ON UPDATE CASCADE\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n\\n\\nDROP TABLE IF EXISTS `application_stats`;\\nCREATE TABLE `application_stats` (\\n  `application_id` INT(11) NOT NULL,\\n  `statistic` VARCHAR(255) NOT NULL,\\n  `value` FLOAT NOT NULL,\\n  `timestamp` DATETIME NOT NULL,\\n  PRIMARY KEY (`application_id`, `statistic`),\\n  CONSTRAINT `application_stats_app_id_ibfk` FOREIGN KEY (`application_id`) REFERENCES `application` (`id`)\\n    ON DELETE CASCADE ON UPDATE CASCADE\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n\\nDROP TABLE IF EXISTS `global_stats`;\\nCREATE TABLE `global_stats` (\\n  `statistic` VARCHAR(255) NOT NULL,\\n  `value` FLOAT NOT NULL,\\n  `timestamp` DATETIME NOT NULL,\\n  PRIMARY KEY (`statistic`)\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n\\nDROP TABLE IF EXISTS `comment`;\\nCREATE TABLE `comment` (\\n  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,\\n  `incident_id` BIGINT(20) NOT NULL,\\n  `created` DATETIME NOT NULL,\\n  `user_id` BIGINT(20) NOT NULL,\\n  `content` TEXT NOT NULL,\\n  PRIMARY KEY (`id`),\\n  CONSTRAINT `comment_incident_id_ibfk` FOREIGN KEY (`incident_id`) REFERENCES `incident` (`id`),\\n  CONSTRAINT `comment_user_id_ibfk` FOREIGN KEY (`user_id`) REFERENCES `user` (`target_id`) ON DELETE CASCADE ON UPDATE CASCADE\\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\\n\\n/*!40101 SET character_set_client = @saved_cs_client */;\\n/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;\\n\\n/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;\\n/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;\\n/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;\\n/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;\\n/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;\\n/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;\\n/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;\\n\\n-- Dump completed on 2016-09-28 11:52:18\\n\"\n   1_schema.sql: |\n    USE iris;\n\n    CREATE TABLE IF NOT EXISTS `access_token` (\n      `id` BIGINT(20) NOT NULL AUTO_INCREMENT,\n      `user_id` bigint(20) NOT NULL,\n      `key` varchar(255) NOT NULL UNIQUE,\n      `expiration` BIGINT(20) UNSIGNED NOT NULL,\n      PRIMARY KEY (`id`),\n      KEY `access_user_idx` (`user_id`),\n      CONSTRAINT `access_user_id_fk` FOREIGN KEY (`user_id`) REFERENCES `target` (`id`)\n    );\n\n    CREATE TABLE IF NOT EXISTS `refresh_token` (\n      `id` BIGINT(20) NOT NULL AUTO_INCREMENT,\n      `user_id` bigint(20) NOT NULL,\n      `key` varchar(255) NOT NULL UNIQUE,\n      `expiration` BIGINT(20) UNSIGNED NOT NULL,\n      PRIMARY KEY (`id`),\n      KEY `refresh_user_idx` (`user_id`),\n      CONSTRAINT `refresh_user_id_fk` FOREIGN KEY (`user_id`) REFERENCES `target` (`id`)\n    );\n\n    CREATE TABLE IF NOT EXISTS `saml_id` (\n      `id` VARCHAR(255) NOT NULL,\n      `timestamp` BIGINT(20) UNSIGNED NOT NULL,\n      PRIMARY KEY (`id`)\n    );\n - \n  kind: Service\n  apiVersion: v1\n  metadata:\n   name: my-service\n  spec:\n   selector:\n    name: app\n   ports:\n    - \n     protocol: TCP\n     port: 16649\n     targetPort: 16649\n"
        }
      }
    }
  }
}
